{"ast":null,"code":"import { HttpParams } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class GifServiceService {\n  constructor(http) {\n    this.http = http;\n    this._historial = [];\n    this.apiKey = 'J9EkEQEwk1JedQ7LtzSEFCbQFDIqy9fH';\n    this.servicioURL = 'https://api.giphy.com/v1/gifs/';\n    this._historial = JSON.parse(localStorage.getItem('Historial')) || [];\n    this.resultados = JSON.parse(localStorage.getItem('Resultado')) || [];\n  }\n  get historial() {\n    return [...this._historial];\n  }\n  buscarGif(query = '') {\n    query = query.trim().toLocaleLowerCase();\n    if (!this._historial.includes(query)) {\n      this._historial.unshift(query);\n      this._historial = this._historial.splice(0.9);\n      localStorage.setItem('Historial', JSON.stringify(this._historial));\n    }\n    const params = new HttpParams().set('api_key', this.apiKey).set('limit', 10).set('q', query);\n    this.http.get(`search?api_key=${this.apiKey}&q=${query}&limit=10`).subscribe(resp => {\n      console.log(resp.data);\n      this.resultados = resp.data;\n      localStorage.setItem('Resultado', JSON.stringify(this.resultados));\n    });\n  }\n}\nGifServiceService.ɵfac = function GifServiceService_Factory(t) {\n  return new (t || GifServiceService)(i0.ɵɵinject(i1.HttpClient));\n};\nGifServiceService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: GifServiceService,\n  factory: GifServiceService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAAA,SAAqBA,UAAU,QAAQ,sBAAsB;;;AAO7D,OAAM,MAAOC,iBAAiB;EAW5BC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;IAThB,eAAU,GAAa,EAAE;IACzB,WAAM,GAAW,kCAAkC;IACnD,gBAAW,GAAW,gCAAgC;IAS5D,IAAI,CAACC,UAAU,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAE,CAAC,IAAI,EAAE;IACtE,IAAI,CAACC,UAAU,GAAGJ,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAE,CAAC,IAAI,EAAE;EAExE;EATA,IAAIE,SAAS;IACX,OAAO,CAAC,GAAG,IAAI,CAACN,UAAU,CAAC;EAC7B;EASAO,SAAS,CAACC,QAAgB,EAAE;IAC1BA,KAAK,GAAGA,KAAK,CAACC,IAAI,EAAE,CAACC,iBAAiB,EAAE;IACxC,IAAI,CAAC,IAAI,CAACV,UAAU,CAACW,QAAQ,CAACH,KAAK,CAAC,EAAE;MACpC,IAAI,CAACR,UAAU,CAACY,OAAO,CAACJ,KAAK,CAAC;MAC9B,IAAI,CAACR,UAAU,GAAG,IAAI,CAACA,UAAU,CAACa,MAAM,CAAC,GAAG,CAAC;MAE7CV,YAAY,CAACW,OAAO,CAAC,WAAW,EAAEb,IAAI,CAACc,SAAS,CAAC,IAAI,CAACf,UAAU,CAAC,CAAC;;IAIpE,MAAMgB,MAAM,GAAG,IAAIpB,UAAU,EAAE,CAC5BqB,GAAG,CAAC,SAAS,EAAE,IAAI,CAACC,MAAM,CAAC,CAC3BD,GAAG,CAAC,OAAO,EAAC,EAAE,CAAC,CACfA,GAAG,CAAC,GAAG,EAACT,KAAK,CAAC;IAEjB,IAAI,CAACT,IAAI,CAACoB,GAAG,CAAqB,kBAAkB,IAAI,CAACD,MAAM,MAAMV,KAAK,WAAW,CAAC,CACnFY,SAAS,CAAEC,IAAI,IAAI;MAClBC,OAAO,CAACC,GAAG,CAACF,IAAI,CAACG,IAAI,CAAC;MACtB,IAAI,CAACnB,UAAU,GAAGgB,IAAI,CAACG,IAAI;MAC3BrB,YAAY,CAACW,OAAO,CAAC,WAAW,EAAEb,IAAI,CAACc,SAAS,CAAC,IAAI,CAACV,UAAU,CAAC,CAAC;IACpE,CAAC,CAAC;EACN;;AAvCWR,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;SAAjBA,iBAAiB;EAAA4B,SAAjB5B,iBAAiB;EAAA6B,YAFhB;AAAM","names":["HttpParams","GifServiceService","constructor","http","_historial","JSON","parse","localStorage","getItem","resultados","historial","buscarGif","query","trim","toLocaleLowerCase","includes","unshift","splice","setItem","stringify","params","set","apiKey","get","subscribe","resp","console","log","data","factory","providedIn"],"sourceRoot":"","sources":["C:\\Users\\Gonza\\OneDrive\\Escritorio\\Fernando Herrera\\gifapp\\src\\app\\gifs\\service\\gif.service.ts"],"sourcesContent":["import { HttpClient, HttpParams } from '@angular/common/http';\nimport { Injectable, Query } from '@angular/core';\nimport { SearchGIfsResponse, Gif } from '../interface/gif.Interface';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GifServiceService {\n\n  private _historial: string[] = [];\n  private apiKey: string = 'J9EkEQEwk1JedQ7LtzSEFCbQFDIqy9fH'\n  private servicioURL: string = 'https://api.giphy.com/v1/gifs/'\n  public resultados: any;\n\n  get historial() {\n    return [...this._historial]\n  }\n\n  constructor(private http: HttpClient) {\n\n    this._historial = JSON.parse(localStorage.getItem('Historial')!) || [];\n    this.resultados = JSON.parse(localStorage.getItem('Resultado')!) || [];\n\n  }\n\n  buscarGif(query: string = '') {\n    query = query.trim().toLocaleLowerCase()\n    if (!this._historial.includes(query)) {\n      this._historial.unshift(query);\n      this._historial = this._historial.splice(0.9)\n\n      localStorage.setItem('Historial', JSON.stringify(this._historial));\n\n    }\n\n    const params = new HttpParams()\n      .set('api_key', this.apiKey)\n      .set('limit',10)\n      .set('q',query)\n\n    this.http.get<SearchGIfsResponse>(`search?api_key=${this.apiKey}&q=${query}&limit=10`)\n      .subscribe((resp) => {\n        console.log(resp.data);\n        this.resultados = resp.data\n        localStorage.setItem('Resultado', JSON.stringify(this.resultados))\n      })\n  }\n\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}